{"filter":false,"title":"riot-games-api-nodejs.js","tooltip":"/riot-games-api-nodejs.js","undoManager":{"mark":100,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":313,"column":39},"end":{"row":313,"column":40},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":40},"end":{"row":313,"column":41},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":42},"end":{"row":313,"column":43},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":43},"end":{"row":313,"column":44},"action":"insert","lines":["+"]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":44},"end":{"row":313,"column":45},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":45},"end":{"row":313,"column":46},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":46},"end":{"row":313,"column":47},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":47},"end":{"row":313,"column":48},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":48},"end":{"row":313,"column":49},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":49},"end":{"row":313,"column":50},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":50},"end":{"row":313,"column":51},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":27},"end":{"row":306,"column":28},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":28},"end":{"row":306,"column":29},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":29},"end":{"row":306,"column":30},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":30},"end":{"row":306,"column":31},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":31},"end":{"row":306,"column":32},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":32},"end":{"row":306,"column":33},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":33},"end":{"row":306,"column":34},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":34},"end":{"row":306,"column":35},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":34},"end":{"row":306,"column":35},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":33},"end":{"row":306,"column":34},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":32},"end":{"row":306,"column":33},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":31},"end":{"row":306,"column":32},"action":"remove","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":30},"end":{"row":306,"column":31},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":29},"end":{"row":306,"column":30},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":28},"end":{"row":306,"column":29},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":27},"end":{"row":306,"column":28},"action":"remove","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":25},"end":{"row":312,"column":26},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":26},"end":{"row":312,"column":27},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":27},"end":{"row":312,"column":28},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":28},"end":{"row":312,"column":29},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":29},"end":{"row":312,"column":30},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":30},"end":{"row":312,"column":31},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":51},"end":{"row":313,"column":52},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":52},"end":{"row":313,"column":53},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":53},"end":{"row":313,"column":55},"action":"insert","lines":["[]"]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":54},"end":{"row":313,"column":55},"action":"remove","lines":["]"]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":53},"end":{"row":313,"column":54},"action":"remove","lines":["["]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":53},"end":{"row":313,"column":55},"action":"insert","lines":["{}"]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":55},"end":{"row":313,"column":56},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":56},"end":{"row":313,"column":57},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":57},"end":{"row":313,"column":58},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":58},"end":{"row":313,"column":59},"action":"insert","lines":["b"]}]}],[{"group":"doc","deltas":[{"start":{"row":314,"column":9},"end":{"row":314,"column":10},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":305,"column":0},"end":{"row":306,"column":0},"action":"insert","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":0},"end":{"row":316,"column":7},"action":"insert","lines":["/**","     * Retrieves champion list. (REST)","     *","     * @param {String} region","     * @param {Object} options","     *   {String} locale","     *   {String} version","     *   {Boolean} dateById","     *   {String} champData","     * @param {Function(!Error, Object)} callback","     */"]}]}],[{"group":"doc","deltas":[{"start":{"row":307,"column":0},"end":{"row":307,"column":4},"action":"remove","lines":["    "]},{"start":{"row":308,"column":0},"end":{"row":308,"column":4},"action":"remove","lines":["    "]},{"start":{"row":309,"column":0},"end":{"row":309,"column":4},"action":"remove","lines":["    "]},{"start":{"row":310,"column":0},"end":{"row":310,"column":4},"action":"remove","lines":["    "]},{"start":{"row":311,"column":0},"end":{"row":311,"column":4},"action":"remove","lines":["    "]},{"start":{"row":312,"column":0},"end":{"row":312,"column":4},"action":"remove","lines":["    "]},{"start":{"row":313,"column":0},"end":{"row":313,"column":4},"action":"remove","lines":["    "]},{"start":{"row":314,"column":0},"end":{"row":314,"column":4},"action":"remove","lines":["    "]},{"start":{"row":315,"column":0},"end":{"row":315,"column":4},"action":"remove","lines":["    "]},{"start":{"row":316,"column":0},"end":{"row":316,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":307,"column":3},"end":{"row":307,"column":34},"action":"remove","lines":["Retrieves champion list. (REST)"]}]}],[{"group":"doc","deltas":[{"start":{"row":307,"column":2},"end":{"row":307,"column":3},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":307,"column":1},"end":{"row":307,"column":2},"action":"remove","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":307,"column":0},"end":{"row":307,"column":1},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":3},"end":{"row":307,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":3},"end":{"row":307,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":3},"end":{"row":306,"column":4},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":3},"end":{"row":306,"column":4},"action":"remove","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":3},"end":{"row":307,"column":0},"action":"insert","lines":["",""]},{"start":{"row":307,"column":0},"end":{"row":307,"column":3},"action":"insert","lines":[" * "]}]}],[{"group":"doc","deltas":[{"start":{"row":308,"column":0},"end":{"row":313,"column":23},"action":"remove","lines":[" * @param {String} region"," * @param {Object} options"," *   {String} locale"," *   {String} version"," *   {Boolean} dateById"," *   {String} champData"]}]}],[{"group":"doc","deltas":[{"start":{"row":307,"column":3},"end":{"row":308,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":12},"end":{"row":313,"column":0},"action":"insert","lines":["",""]},{"start":{"row":313,"column":0},"end":{"row":313,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":8},"end":{"row":316,"column":3},"action":"insert","lines":["/**"," * "," * @param {Function(!Error, Object)} callback"," */"]}]}],[{"group":"doc","deltas":[{"start":{"row":314,"column":0},"end":{"row":314,"column":4},"action":"insert","lines":["    "]},{"start":{"row":315,"column":0},"end":{"row":315,"column":4},"action":"insert","lines":["    "]},{"start":{"row":316,"column":0},"end":{"row":316,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":314,"column":0},"end":{"row":314,"column":4},"action":"insert","lines":["    "]},{"start":{"row":315,"column":0},"end":{"row":315,"column":4},"action":"insert","lines":["    "]},{"start":{"row":316,"column":0},"end":{"row":316,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":8},"end":{"row":316,"column":11},"action":"remove","lines":["/**","         * ","         * @param {Function(!Error, Object)} callback","         */"]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":12},"end":{"row":313,"column":8},"action":"remove","lines":["","        "]}]}],[{"group":"doc","deltas":[{"start":{"row":315,"column":10},"end":{"row":316,"column":0},"action":"insert","lines":["",""]},{"start":{"row":316,"column":0},"end":{"row":316,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":316,"column":8},"end":{"row":319,"column":11},"action":"insert","lines":["/**","         * ","         * @param {Function(!Error, Object)} callback","         */"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":11},"end":{"row":317,"column":12},"action":"insert","lines":["@"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":12},"end":{"row":317,"column":13},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":13},"end":{"row":317,"column":14},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":14},"end":{"row":317,"column":15},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":15},"end":{"row":317,"column":16},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":16},"end":{"row":317,"column":17},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":17},"end":{"row":317,"column":18},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":18},"end":{"row":317,"column":19},"action":"insert","lines":["{"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":19},"end":{"row":317,"column":20},"action":"insert","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":20},"end":{"row":317,"column":21},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":21},"end":{"row":317,"column":22},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":22},"end":{"row":317,"column":23},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":23},"end":{"row":317,"column":24},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":24},"end":{"row":317,"column":25},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":25},"end":{"row":317,"column":26},"action":"insert","lines":["}"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":26},"end":{"row":317,"column":27},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":27},"end":{"row":317,"column":28},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":28},"end":{"row":317,"column":29},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":29},"end":{"row":317,"column":30},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":30},"end":{"row":317,"column":31},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":31},"end":{"row":317,"column":32},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":317,"column":32},"end":{"row":317,"column":33},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":617,"column":17},"end":{"row":618,"column":0},"action":"insert","lines":["",""]},{"start":{"row":618,"column":0},"end":{"row":618,"column":16},"action":"insert","lines":["                "]}]}],[{"group":"doc","deltas":[{"start":{"row":618,"column":16},"end":{"row":618,"column":17},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":618,"column":17},"end":{"row":618,"column":18},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":628,"column":17},"end":{"row":629,"column":0},"action":"insert","lines":["",""]},{"start":{"row":629,"column":0},"end":{"row":629,"column":16},"action":"insert","lines":["                "]}]}],[{"group":"doc","deltas":[{"start":{"row":629,"column":16},"end":{"row":629,"column":17},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":629,"column":17},"end":{"row":629,"column":18},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":537,"column":46},"end":{"row":537,"column":56},"action":"remove","lines":["oldJsonKey"]}]}],[{"group":"doc","deltas":[{"start":{"row":537,"column":45},"end":{"row":537,"column":46},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":537,"column":44},"end":{"row":537,"column":45},"action":"remove","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":618,"column":17},"end":{"row":629,"column":18},"action":"remove","lines":["*","                else if (oldJsonKey !== undefined) {","                    if (data[oldJsonKey] === undefined) {","                        complete = true","                        error = new Error('invalid response')","                        error.origin = 'api'","                    }","                    else {","                        data = data[oldJsonKey]","                    }","                }","                */"]}]}],[{"group":"doc","deltas":[{"start":{"row":618,"column":16},"end":{"row":618,"column":17},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":618,"column":12},"end":{"row":618,"column":16},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":618,"column":8},"end":{"row":618,"column":12},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":618,"column":4},"end":{"row":618,"column":8},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":618,"column":0},"end":{"row":618,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":617,"column":17},"end":{"row":618,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":617,"column":17},"end":{"row":618,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":18},"end":{"row":14,"column":56},"action":"remove","lines":["'afc3b634-a443-4919-adda-a60877f3fa32'"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":18},"end":{"row":14,"column":19},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":19},"end":{"row":14,"column":20},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":20},"end":{"row":14,"column":21},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":21},"end":{"row":14,"column":22},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":18},"end":{"row":14,"column":22},"action":"remove","lines":["null"]},{"start":{"row":14,"column":18},"end":{"row":14,"column":56},"action":"insert","lines":["'afc3b634-a443-4919-adda-a60877f3fa32'"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":18},"end":{"row":14,"column":56},"action":"remove","lines":["'afc3b634-a443-4919-adda-a60877f3fa32'"]},{"start":{"row":14,"column":18},"end":{"row":14,"column":19},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":19},"end":{"row":14,"column":20},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":20},"end":{"row":14,"column":21},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":21},"end":{"row":14,"column":22},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":322,"column":9},"end":{"row":530,"column":5},"action":"remove","lines":[",","        talk: function(path, fields, cb, oldJsonKey){","            var complete = false","            // fix callback","        \tif( !cb && typeof fields === 'function' ) {","        \t\tvar cb = fields;","        \t\tvar fields = {}","        \t}","        \t","        \t// fix fields","        \tif( !fields || typeof fields !== 'object' ) {","        \t\tvar fields = {}","        \t}","            // prepare","            var options = {","                hostname: 'status.leagueoflegends.com',","                path: '/' + path,","                method: 'GET'","            }","            var request = require('http').request(options)","                // response","            request.on('response', function(response) {","                var data = []","                var size = 0","","                response.on('data', function(chunk) {","                    data.push(chunk)","                    size += chunk.length","                })","","                response.on('end', function() {","","                    if (complete) {","                        return","                    }","                    else {","                        complete = true","                    }","","                    // process buffer and clear mem","                    var buf = new Buffer(size)","                    var pos = 0","","                    for (var i = 0; i < data.length; ++i) {","                        data[i].copy(buf, pos)","                        pos += data[i].length","                    }","","                    data = buf.toString('utf8').trim()","","                    var error = null","","                    // validate","                    if (data.match(/^(\\{.*\\}|\\[.*\\])$/)) {","","                        // ok","                        data = JSON.parse(data)","","                        if (data.data !== undefined) {","                            data = data.data","                        }","                        else if (data.error !== undefined) {","                            complete = true","                            error = new Error('error')","                            error.origin = 'api'","                            error.details = data.error","                        }","                        else if (oldJsonKey !== undefined) {","                            if (data[oldJsonKey] === undefined) {","                                complete = true","                                error = new Error('invalid response')","                                error.origin = 'api'","                            }","                            else {","                                data = data[oldJsonKey]","                            }","                        }","","                    }","                    else if (data.match(/^<errors .+<\\/errors>$/) || data.match(/^<\\?xml version.+<\\/errors>$/)) {","","                        // xml error response","                        data = xml2json.parser(data)","","                        // fix for JSONC compatibility","                        complete = true","                        error = new Error('error')","                        error.origin = 'api'","                        error.details = data.errors.error !== undefined ? [data.errors.error] : data.errors","","                        error.details.forEach(function(err, errk) {","                            if (err.internalreason !== undefined) {","                                error.details[errk].internalReason = err.internalreason","                                delete error.details[errk].internalreason","                            }","                        })","","                    }","                    else if (~data.indexOf('<H2>Error ')) {","","                        // html error response","                        complete = true","                        var error = new Error('error')","                        data.replace(/<H1>([^<]+)<\\/H1>\\n<H2>Error (\\d+)<\\/H2>/, function(s, reason, code) {","                            error.origin = 'api'","                            error.details = {","                                internalReason: reason,","                                code: code","                            }","                        })","","                    }","                    else {","","                        // not json","                        complete = true","                        error = new Error('not json')","                        error.origin = 'api'","","                    }","","                    // parse error","                    if (error && error.origin === 'api' && error.message === 'error') {","                        var errorDetails = error.details","                        if (","                            error.details[0] !== undefined && error.details[0].code !== undefined && error.details[0].code === 'ResourceNotFoundException'","                        ) {","                            complete = true","                            error = new Error('not found')","                            error.origin = 'method'","                            error.details = errorDetails","                        }","                        else if (error.details.code == 403) {","                            complete = true","                            error = new Error('not allowed')","                            error.origin = 'method'","                            error.details = errorDetails","                        }","                        else if (error.details.message === 'Invalid id') {","                            complete = true","                            error = new Error('invalid id')","                            error.origin = 'method'","                            error.details = errorDetails","                        }","                        else if (error.details[0] && error.details[0].internalReason === 'Developer key required for this operation') {","                            complete = true","                            error = new Error('developer key missing')","                            error.origin = 'api'","                            error.details = errorDetails","                        }","                    }","","                    // parse response","                    if (data.totalItems !== undefined && data.totalItems == 0) {","                        complete = true","                        error = new Error('not found')","                        error.origin = 'method'","                    }","                    else if (","                        data.feed !== undefined && data.feed['openSearch$totalResults'] !== undefined && data.feed['openSearch$totalResults']['$t'] !== undefined && data.feed['openSearch$totalResults']['$t'] == 0","                    ) {","                        complete = true","                        error = new Error('not found')","                        error.origin = 'method'","                    }","","                    // do callback","                    cb(error, data)","","                })","","                // early disconnect","                response.on('close', function() {","                    if (!complete) {","                        complete = true","                        var err = new Error('connection closed')","                        err.origin = 'api'","                        cb(err)","                    }","                })","","            })","","            // no endless waiting","            request.setTimeout(app.timeout, function() {","                if (!complete) {","                    complete = true","                    var err = new Error('request timeout')","                    err.origin = 'request'","                    cb(err)","                    request.destroy()","                }","            })","","            // connection error","            request.on('error', function(error) {","                if (!complete) {","                    complete = true","                    var err = new Error('connection error')","                    err.origin = 'request'","                    err.details = error","                    cb(err)","                }","            })","","            // perform and finish request","            request.end()","        }","    }"]}]}],[{"group":"doc","deltas":[{"start":{"row":313,"column":8},"end":{"row":322,"column":9},"action":"remove","lines":["shards: function() {","            app.lolStatus().talk('shards', {}, cb);","        },","        /**","         * @param {String} region","         * @param {Function(!Error, Object)} callback","         */","        region: function(region) {","            app.lolStatus().talk('shards/' + region, {}, cb)","        }"]}]}],[{"group":"doc","deltas":[{"start":{"row":311,"column":0},"end":{"row":313,"column":8},"action":"remove","lines":["    app.httpProtocol = 'http';","    return {","        "]},{"start":{"row":311,"column":0},"end":{"row":320,"column":9},"action":"insert","lines":["shards: function() {","            app.lolStatus().talk('shards', {}, cb);","        },","        /**","         * @param {String} region","         * @param {Function(!Error, Object)} callback","         */","        region: function(region) {","            app.lolStatus().talk('shards/' + region, {}, cb)","        }"]}]}],[{"group":"doc","deltas":[{"start":{"row":311,"column":0},"end":{"row":311,"column":4},"action":"insert","lines":["    "]},{"start":{"row":312,"column":0},"end":{"row":312,"column":4},"action":"insert","lines":["    "]},{"start":{"row":313,"column":0},"end":{"row":313,"column":4},"action":"insert","lines":["    "]},{"start":{"row":314,"column":0},"end":{"row":314,"column":4},"action":"insert","lines":["    "]},{"start":{"row":315,"column":0},"end":{"row":315,"column":4},"action":"insert","lines":["    "]},{"start":{"row":316,"column":0},"end":{"row":316,"column":4},"action":"insert","lines":["    "]},{"start":{"row":317,"column":0},"end":{"row":317,"column":4},"action":"insert","lines":["    "]},{"start":{"row":318,"column":0},"end":{"row":318,"column":4},"action":"insert","lines":["    "]},{"start":{"row":319,"column":0},"end":{"row":319,"column":4},"action":"insert","lines":["    "]},{"start":{"row":320,"column":0},"end":{"row":320,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":0},"end":{"row":312,"column":4},"action":"remove","lines":["    "]},{"start":{"row":313,"column":0},"end":{"row":313,"column":4},"action":"remove","lines":["    "]},{"start":{"row":314,"column":0},"end":{"row":314,"column":4},"action":"remove","lines":["    "]},{"start":{"row":315,"column":0},"end":{"row":315,"column":4},"action":"remove","lines":["    "]},{"start":{"row":316,"column":0},"end":{"row":316,"column":4},"action":"remove","lines":["    "]},{"start":{"row":317,"column":0},"end":{"row":317,"column":4},"action":"remove","lines":["    "]},{"start":{"row":318,"column":0},"end":{"row":318,"column":4},"action":"remove","lines":["    "]},{"start":{"row":319,"column":0},"end":{"row":319,"column":4},"action":"remove","lines":["    "]},{"start":{"row":320,"column":0},"end":{"row":320,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":0},"end":{"row":312,"column":4},"action":"remove","lines":["    "]},{"start":{"row":313,"column":0},"end":{"row":313,"column":4},"action":"remove","lines":["    "]},{"start":{"row":314,"column":0},"end":{"row":314,"column":4},"action":"remove","lines":["    "]},{"start":{"row":315,"column":0},"end":{"row":315,"column":4},"action":"remove","lines":["    "]},{"start":{"row":316,"column":0},"end":{"row":316,"column":4},"action":"remove","lines":["    "]},{"start":{"row":317,"column":0},"end":{"row":317,"column":4},"action":"remove","lines":["    "]},{"start":{"row":318,"column":0},"end":{"row":318,"column":4},"action":"remove","lines":["    "]},{"start":{"row":319,"column":0},"end":{"row":319,"column":4},"action":"remove","lines":["    "]},{"start":{"row":320,"column":0},"end":{"row":320,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":0},"end":{"row":312,"column":4},"action":"remove","lines":["    "]},{"start":{"row":313,"column":0},"end":{"row":313,"column":4},"action":"remove","lines":["    "]},{"start":{"row":314,"column":0},"end":{"row":314,"column":4},"action":"remove","lines":["    "]},{"start":{"row":315,"column":0},"end":{"row":315,"column":4},"action":"remove","lines":["    "]},{"start":{"row":316,"column":0},"end":{"row":316,"column":4},"action":"remove","lines":["    "]},{"start":{"row":317,"column":0},"end":{"row":317,"column":4},"action":"remove","lines":["    "]},{"start":{"row":318,"column":0},"end":{"row":318,"column":4},"action":"remove","lines":["    "]},{"start":{"row":319,"column":0},"end":{"row":319,"column":4},"action":"remove","lines":["    "]},{"start":{"row":320,"column":0},"end":{"row":320,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":0},"end":{"row":312,"column":4},"action":"remove","lines":["    "]},{"start":{"row":315,"column":0},"end":{"row":315,"column":1},"action":"remove","lines":[" "]},{"start":{"row":316,"column":0},"end":{"row":316,"column":1},"action":"remove","lines":[" "]},{"start":{"row":317,"column":0},"end":{"row":317,"column":1},"action":"remove","lines":[" "]},{"start":{"row":319,"column":0},"end":{"row":319,"column":4},"action":"remove","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":0},"end":{"row":312,"column":4},"action":"insert","lines":["    "]},{"start":{"row":313,"column":0},"end":{"row":313,"column":4},"action":"insert","lines":["    "]},{"start":{"row":314,"column":0},"end":{"row":314,"column":4},"action":"insert","lines":["    "]},{"start":{"row":315,"column":0},"end":{"row":315,"column":4},"action":"insert","lines":["    "]},{"start":{"row":316,"column":0},"end":{"row":316,"column":4},"action":"insert","lines":["    "]},{"start":{"row":317,"column":0},"end":{"row":317,"column":4},"action":"insert","lines":["    "]},{"start":{"row":318,"column":0},"end":{"row":318,"column":4},"action":"insert","lines":["    "]},{"start":{"row":319,"column":0},"end":{"row":319,"column":4},"action":"insert","lines":["    "]},{"start":{"row":320,"column":0},"end":{"row":320,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":319,"column":4},"end":{"row":319,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":4},"end":{"row":312,"column":8},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":310,"column":16},"end":{"row":310,"column":27},"action":"remove","lines":["function(cb"]}]}],[{"group":"doc","deltas":[{"start":{"row":310,"column":16},"end":{"row":310,"column":17},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":310,"column":16},"end":{"row":310,"column":17},"action":"remove","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":43},"end":{"row":312,"column":45},"action":"remove","lines":["cb"]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":43},"end":{"row":312,"column":44},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":44},"end":{"row":312,"column":45},"action":"insert","lines":["b"]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":12},"end":{"row":312,"column":24},"action":"remove","lines":["lolStatus()."]},{"start":{"row":312,"column":12},"end":{"row":312,"column":13},"action":"insert","lines":["\\"]}]}],[{"group":"doc","deltas":[{"start":{"row":312,"column":12},"end":{"row":312,"column":13},"action":"remove","lines":["\\"]}]}],[{"group":"doc","deltas":[{"start":{"row":319,"column":12},"end":{"row":319,"column":24},"action":"remove","lines":["lolStatus()."]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":0},"end":{"row":309,"column":3},"action":"remove","lines":["/**"," * "," * @param {Function(!Error, Object)} callback"," */"]}]}],[{"group":"doc","deltas":[{"start":{"row":305,"column":0},"end":{"row":306,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":307,"column":21},"end":{"row":307,"column":22},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":307,"column":22},"end":{"row":307,"column":23},"action":"insert","lines":["b"]}]}],[{"group":"doc","deltas":[{"start":{"row":314,"column":27},"end":{"row":314,"column":28},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":314,"column":28},"end":{"row":314,"column":29},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":314,"column":29},"end":{"row":314,"column":30},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":314,"column":30},"end":{"row":314,"column":31},"action":"insert","lines":["b"]}]}],[{"group":"doc","deltas":[{"start":{"row":306,"column":17},"end":{"row":307,"column":0},"action":"insert","lines":["",""]},{"start":{"row":307,"column":0},"end":{"row":307,"column":4},"action":"insert","lines":["    "]}]}],[{"group":"doc","deltas":[{"start":{"row":307,"column":4},"end":{"row":310,"column":6},"action":"insert","lines":["/**","    * @param {String} region","    * @param {Function(!Error, Object)} callback","    */"]}]}],[{"group":"doc","deltas":[{"start":{"row":307,"column":7},"end":{"row":308,"column":28},"action":"remove","lines":["","    * @param {String} region"]}]}]]},"ace":{"folds":[{"start":{"row":21,"column":16},"end":{"row":46,"column":0},"placeholder":"..."},{"start":{"row":52,"column":12},"end":{"row":64,"column":0},"placeholder":"..."},{"start":{"row":70,"column":14},"end":{"row":126,"column":0},"placeholder":"..."},{"start":{"row":132,"column":18},"end":{"row":300,"column":0},"placeholder":"..."},{"start":{"row":310,"column":30},"end":{"row":531,"column":0},"placeholder":"..."},{"start":{"row":537,"column":47},"end":{"row":749,"column":0},"placeholder":"..."}],"scrolltop":536,"scrollleft":0,"selection":{"start":{"row":537,"column":47},"end":{"row":537,"column":47},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":127,"state":"no_regex","mode":"ace/mode/javascript"}},"timestamp":1420042320536,"hash":"8b37f118113d756ce7df24f4ac10f7aeda4d28ab"}